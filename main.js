(()=>{var t={194:t=>{function e({length:t,hits:e,sunk:n,row:i,col:o}){return{length:t,hits:e||0,sunk:n||!1,id:Date.now(),position:{row:i,column:o},hit(){this.hits++,this.isSunk()},isSunk(){this.length===this.hits&&(this.sunk=!0)}}}function n(){let t=[];for(let e=0;e<10;e++){t[e]=[];for(let n=0;n<10;n++)t[e][n]=0}return t}function i(){return{locations:n(),ships:[],placeShip(t,n,i,o){let a;if(!0===o){a={row:[],column:[i]};for(let e=n;e<n+t;e++)this.locations[e][i]=1,a.row.push(e)}else{a={row:[n],column:[]};for(let e=i;e<i+t;e++)this.locations[n][e]=1,a.column.push(e)}const r=e({length:t,row:a.row,col:a.column});this.ships.push(r)},receiveAttack(t,e){!1===this.ships.some((n=>!(!n.position.row.includes(t)||!n.position.column.includes(e)||(n.hit(),0))))&&(this.locations[t][e]="x")},checkSinked(){return this.ships.every((t=>!0===t.sunk))},remainingShips(){return this.ships.filter((({sunk:t})=>!1===t)).length}}}t.exports={createShip:e,Gameboard:i,AI:function(){const t=i(),e=n();return t.placeShip(4,2,3),t.placeShip(2,0,0),t.placeShip(5,9,0),t.placeShip(3,5,5,!0),{gameboard:t,markedLocations:e,doMove(){let t={row:Math.floor(9*Math.random()),column:Math.floor(9*Math.random())};if(0===this.markedLocations[t.row][t.column])return this.markedLocations[t.row][t.column]="x",t;this.doMove()}}}}}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}(()=>{"use strict";const{Gameboard:t,AI:e}=n(194),i=document.getElementsByTagName("main")[0];let o,a=t(),r=e();function s(t,e){const n=document.createElement(t);return n.classList.add(e),n}function d(){i.innerHTML=""}function c(){const t=s("div","player-board"),e=a.locations;for(let n=0;n<e.length;n++){const i=s("div","row");for(let r=0;r<e.length;r++){const d=s("div","square");1===e[n][r]&&d.classList.add("ship"),d.addEventListener("dragover",(t=>{t.preventDefault()}),!1),d.addEventListener("drop",(i=>{if(i.preventDefault(),1===e[n][r])return;if(0!=n&&0!=r&&1===e[n-1][r-1])return;if(9!=n&&9!=r&&1===e[n+1][r+1])return;if(0!=n&&1===e[n-1][r])return;if(9!=n&&1===e[n+1][r])return;if(0!=r&&1===e[n][r-1])return;if(9!=r&&1===e[n][r+1])return;if("on"===o.dataset.placed)return;let s=o.children.length;const d=o.dataset.horizontal;r+s>10&&"on"===d||n+s>10&&"off"===d||("on"===d?(o.dataset.placed="on",a.placeShip(s,n,r,!1)):(o.dataset.placed="on",a.placeShip(s,n,r,!0)),t.innerHTML="",c())})),i.appendChild(d)}t.appendChild(i)}i.appendChild(t)}function l(t,e){const n=s("div",e);n.dataset.horizontal="on",n.dataset.placed="off",n.draggable="true",n.addEventListener("drag",(()=>{o=n}));for(let e=0;e<t;e++){const t=s("div","boat-part");n.appendChild(t)}return n.addEventListener("click",(()=>{"on"!==n.dataset.placed&&("on"===n.dataset.horizontal?n.dataset.horizontal="off":n.dataset.horizontal="on")})),n}function h(){const t=s("div","player-board"),e=a.locations;for(let n=0;n<e.length;n++){const i=s("div","row");for(let t=0;t<e.length;t++){const o=s("div","square");1===e[n][t]&&o.classList.add("ship"),"x"===e[n][t]&&o.classList.add("miss"),i.appendChild(o)}t.appendChild(i)}i.insertBefore(t,i.children[0]),i.removeChild(i.children[1])}!function(){const t=s("div","new-game-container"),e=s("h2");e.innerText="New Game",e.addEventListener("click",(()=>{d(),function(){const t=s("div","boats-container"),e=l(5,"ship-container"),n=l(4,"ship-container"),o=l(3,"ship-container"),p=l(2,"ship-container"),u=s("div","start-game-container"),f=s("button","start-game");f.innerText="Start Game",f.id="start-game",f.addEventListener("click",(()=>{4==a.ships.length&&function(){const t=s("p"),e=s("div");e.id="ships-alive";const n=s("p");n.innerText=r.gameboard.remainingShips(),e.appendChild(n),t.innerText="vs",d(),c(),i.appendChild(t),function(){const t=s("div","computer-board"),e=r.gameboard.locations;for(let n=0;n<e.length;n++){const i=s("div","row");for(let t=0;t<e.length;t++){const o=s("div","square");i.appendChild(o);let d=!1;o.addEventListener("click",(()=>{if(d)return;var i;r.gameboard.receiveAttack(n,t),r.gameboard.checkSinked()&&alert("game won"),a.checkSinked()&&alert("you lost"),1===e[n][t]?o.classList.add("hit"):o.classList.add("miss"),d=!0,i=r.gameboard.remainingShips(),document.getElementById("ships-alive").firstChild.innerText=i;const s=r.doMove();a.receiveAttack(s.row,s.column),h()}))}t.appendChild(i)}i.appendChild(t)}(),i.appendChild(e)}()})),u.appendChild(f),t.append(e,n,o,p),i.append(t,u)}(),c()}));const n=s("div","credits"),o=s("p");o.innerText="Created by vladius9512";const p=s("a");p.href="https://github.com/vladius9512",p.target="_blank";const u=s("img");u.src="./images/github.svg",u.alt="github-logo",p.append(u),n.append(o,p),t.append(e,n),i.append(t)}()})()})();