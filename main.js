(()=>{var e={194:e=>{function t({length:e,hits:t,sunk:n,row:i,col:o}){return{length:e,hits:t||0,sunk:n||!1,id:Date.now(),position:{row:i,column:o},hit(){this.hits++,this.isSunk()},isSunk(){this.length===this.hits&&(this.sunk=!0)}}}function n(){let e=[];for(let t=0;t<10;t++){e[t]=[];for(let n=0;n<10;n++)e[t][n]=0}return e}function i(){return{locations:n(),ships:[],placeShip(e,n,i,o){let a;if(!0===o){a={row:[],column:[i]};for(let t=n;t<n+e;t++)this.locations[t][i]=1,a.row.push(t)}else{a={row:[n],column:[]};for(let t=i;t<i+e;t++)this.locations[n][t]=1,a.column.push(t)}const s=t({length:e,row:a.row,col:a.column});this.ships.push(s)},receiveAttack(e,t){!1===this.ships.some((n=>!(!n.position.row.includes(e)||!n.position.column.includes(t)||(n.hit(),0))))&&(this.locations[e][t]="x")},checkSinked(){return this.ships.every((e=>!0===e.sunk))},remainingShips(){return this.ships.filter((({sunk:e})=>!1===e)).length}}}e.exports={Gameboard:i,AI:function(){const e=i(),t=n();return e.placeShip(4,2,3),e.placeShip(2,0,0),e.placeShip(5,9,0),e.placeShip(3,5,5,!0),{gameboard:e,markedLocations:t,doMove(){let e={row:Math.floor(9*Math.random()),column:Math.floor(9*Math.random())};return 0===this.markedLocations[e.row][e.column]?(this.markedLocations[e.row][e.column]="x",e):this.doMove()}}},createShip:t}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}(()=>{"use strict";const{Gameboard:e,AI:t}=n(194),i=document.getElementsByTagName("main")[0],o=document.getElementsByClassName("overlay")[0];let a,s=e(),r=t();function l(e,t){const n=document.createElement(e);return void 0!==t&&n.classList.add(t),n}function d(){i.innerHTML=""}function c(){const e=l("div","player-board"),t=s.locations;for(let n=0;n<t.length;n++){const o=l("div","row");for(let r=0;r<t.length;r++){const d=l("div","square");1===t[n][r]&&d.classList.add("ship"),d.addEventListener("dragover",(e=>{e.preventDefault()}),!1),d.addEventListener("drop",(o=>{o.preventDefault();let l=a.children.length;if(1===t[n][r])return;if(0!=n&&0!=r&&1===t[n-1][r-1])return;if(9!=n&&9!=r&&1===t[n+1][r+1])return;if(0!=n)for(let e=n;e<n+l-1;e++)if(console.log(n),1===t[n-1][e])return console.log(n,e),void console.log("a");if(9!=n)for(let e=n;e<n+l-1;e++)if(1===t[e+1][r])return console.log(e+1,r),void console.log("b");if(0!=r)for(let e=r;e<r+l-1;e++)if(1===t[n][e+1])return console.log(n,e+1),void console.log("c");if(9!=r)for(let e=r;e<r+l-1;e++)if(1===t[n][e-1])return console.log(n,e-1),void console.log("d");if("on"===a.dataset.placed)return;const d=a.dataset.horizontal;r+l>10&&"on"===d||n+l>10&&"off"===d||("on"===d?(a.dataset.placed="on",s.placeShip(l,n,r,!1)):(a.dataset.placed="on",s.placeShip(l,n,r,!0)),e.innerHTML="",c(),i.removeChild(i.children[2]))})),o.appendChild(d)}e.appendChild(o)}i.appendChild(e)}function p(e,t){const n=l("div",t);n.dataset.horizontal="on",n.dataset.placed="off",n.draggable="true",n.addEventListener("drag",(()=>{a=n}));for(let t=0;t<e;t++){const e=l("div","boat-part");n.appendChild(e)}return n.addEventListener("click",(()=>{"on"!==n.dataset.placed&&("on"===n.dataset.horizontal?n.dataset.horizontal="off":n.dataset.horizontal="on")})),n}function h(){const e=l("div","boats-container"),t=p(5,"ship-container"),n=p(4,"ship-container"),o=p(3,"ship-container"),a=p(2,"ship-container"),h=l("div","start-game-container"),m=l("button","start-game");m.innerText="Start Game",m.id="start-game",m.addEventListener("click",(()=>{4==s.ships.length&&function(){const e=l("p"),t=l("div");t.id="ships-alive";const n=l("p"),o=l("p");o.innerText="You have 4 ships alive",n.innerText="Computer has 4 ships alive",t.append(n,o),e.innerText="vs",d(),c(),i.appendChild(e),function(){const e=l("div","computer-board"),t=r.gameboard.locations;for(let n=0;n<t.length;n++){const i=l("div","row");for(let e=0;e<t.length;e++){const o=l("div","square");i.appendChild(o);let a=!1;o.addEventListener("click",(()=>{if(a)return;r.gameboard.receiveAttack(n,e),r.gameboard.checkSinked()&&f("You won the game!"),s.checkSinked()&&f("Computer won! Try again!"),1===t[n][e]?o.classList.add("hit"):o.classList.add("miss"),a=!0,u(r.gameboard.remainingShips(),s.remainingShips());const i=r.doMove();s.receiveAttack(i.row,i.column),v()}))}e.appendChild(i)}i.appendChild(e)}(),i.appendChild(t)}()})),h.appendChild(m),e.append(t,n,o,a),i.append(e,h)}function u(e,t){const n=document.getElementById("ships-alive");n.firstChild.innerText=`Computer has ${e} ships alive`,n.children[1].innerText=`You have ${t} ships alive`}function v(){const e=l("div","player-board"),t=s.locations;for(let n=0;n<t.length;n++){const i=l("div","row");for(let e=0;e<t.length;e++){const o=l("div","square");1===t[n][e]&&o.classList.add("ship"),"x"===t[n][e]&&o.classList.add("miss"),i.appendChild(o)}e.appendChild(i)}i.insertBefore(e,i.children[0]),i.removeChild(i.children[1])}function f(n){const a=l("div","outcome-restart"),p=l("p");p.innerText=n,a.appendChild(p);const u=l("button","play-again");u.innerText="Play Again",u.addEventListener("click",(()=>{d(),o.classList.remove("active"),s=e(),r=t(),h(),c()})),a.appendChild(u),o.classList.add("active"),i.append(a)}!function(){const e=l("div","new-game-container"),t=l("h2");t.innerText="New Game",t.addEventListener("click",(()=>{d(),h(),c()}));const n=l("div","credits"),o=l("p");o.innerText="Created by vladius9512";const a=l("a");a.href="https://github.com/vladius9512",a.target="_blank";const s=l("img");s.src="./images/github.svg",s.alt="github-logo",a.append(s),n.append(o,a),e.append(t,n),i.append(e)}()})()})();