(()=>{var e={194:e=>{function t({length:e,hits:t,sunk:n,row:i,col:o}){return{length:e,hits:t||0,sunk:n||!1,id:Date.now(),position:{row:i,column:o},hit(){this.hits++,this.isSunk()},isSunk(){this.length===this.hits&&(this.sunk=!0)}}}function n(){let e=[];for(let t=0;t<10;t++){e[t]=[];for(let n=0;n<10;n++)e[t][n]=0}return e}function i(){return{locations:n(),ships:[],placeShip(e,n,i,o){let a;if(!0===o){a={row:[],column:[i]};for(let t=n;t<n+e;t++)this.locations[t][i]=1,a.row.push(t)}else{a={row:[n],column:[]};for(let t=i;t<i+e;t++)this.locations[n][t]=1,a.column.push(t)}const r=t({length:e,row:a.row,col:a.column});this.ships.push(r)},receiveAttack(e,t){!1===this.ships.some((n=>!(!n.position.row.includes(e)||!n.position.column.includes(t)||(n.hit(),0))))&&(this.locations[e][t]="x")},checkSinked(){return this.ships.every((e=>!0===e.sunk))},remainingShips(){return this.ships.filter((({sunk:e})=>!1===e)).length}}}e.exports={Gameboard:i,AI:function(){const e=i(),t=n();return e.placeShip(4,2,3),e.placeShip(2,0,0),e.placeShip(5,9,0),e.placeShip(3,5,5,!0),{gameboard:e,markedLocations:t,doMove(){let e={row:Math.floor(9*Math.random()),column:Math.floor(9*Math.random())};return 0===this.markedLocations[e.row][e.column]?(this.markedLocations[e.row][e.column]="x",e):this.doMove()}}},createShip:t}},555:e=>{e.exports={checkSquaresHorizontal:function(e,t,n,i){if(console.log(t,i),t>0&&t<e.length-1)for(let o=i;o<i+n;o++)if(1===e[t-1][o]||1===e[t+1][o])return!1;if(0===t&&t!==e.length-1)for(let o=i;o<i+n;o++)if(1===e[t+1][o])return!1;if(t===e.length-1)for(let o=i;o<i+n;o++)if(1===e[t-1][o])return!1;return!0},checkSquaresVertical:function(e,t,n,i){if(t>0&&t<e.length-1)for(let o=i;o<i+n;o++)if(1===e[o][t-1]||1===e[o][t+1])return!1;if(0===t)for(let o=i;o<i+n;o++)if(1===e[o][t+1])return!1;if(t===e.length-1)for(let o=i;o<i+n;o++)if(1===e[o][t-1])return!1;return!0}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}(()=>{"use strict";const{Gameboard:e,AI:t}=n(194),{checkSquaresHorizontal:i,checkSquaresVertical:o}=n(555),a=document.getElementsByTagName("main")[0],r=document.getElementsByClassName("overlay")[0];let s,l=e(),c=t();function d(e,t){const n=document.createElement(e);return void 0!==t&&n.classList.add(t),n}function h(){a.innerHTML=""}function p(){const e=d("div","player-board"),t=l.locations;for(let n=0;n<t.length;n++){const r=d("div","row");for(let c=0;c<t.length;c++){const h=d("div","square");1===t[n][c]&&h.classList.add("ship"),h.addEventListener("dragover",(e=>{e.preventDefault()}),!1),h.addEventListener("drop",(r=>{r.preventDefault();let d=s.children.length;if(1===t[n][c])return;if(0!=n&&0!=c&&1===t[n-1][c-1])return;if(9!=n&&9!=c&&1===t[n+1][c+1])return;if("on"===s.dataset.horizontal){if(console.log(d),!1===i(t,n,d,c))return}else if(!1===o(t,c,d,n))return;if("on"===s.dataset.placed)return;const h=s.dataset.horizontal;c+d>10&&"on"===h||n+d>10&&"off"===h||("on"===h?(s.dataset.placed="on",l.placeShip(d,n,c,!1)):(s.dataset.placed="on",l.placeShip(d,n,c,!0)),e.innerHTML="",p(),a.removeChild(a.children[2]))})),r.appendChild(h)}e.appendChild(r)}a.appendChild(e)}function u(e,t){const n=d("div",t);n.dataset.horizontal="on",n.dataset.placed="off",n.draggable="true",n.addEventListener("drag",(()=>{s=n}));for(let t=0;t<e;t++){const e=d("div","boat-part");n.appendChild(e)}return n.addEventListener("click",(()=>{"on"!==n.dataset.placed&&("on"===n.dataset.horizontal?n.dataset.horizontal="off":n.dataset.horizontal="on")})),n}function f(){const e=d("div","boats-container"),t=u(5,"ship-container"),n=u(4,"ship-container"),i=u(3,"ship-container"),o=u(2,"ship-container"),r=d("div","start-game-container"),s=d("button","start-game");s.innerText="Start Game",s.id="start-game",s.addEventListener("click",(()=>{4==l.ships.length&&function(){const e=d("p"),t=d("div");t.id="ships-alive";const n=d("p"),i=d("p");i.innerText="You have 4 ships alive",n.innerText="Computer has 4 ships alive",t.append(n,i),e.innerText="vs",h(),p(),a.appendChild(e),function(){const e=d("div","computer-board"),t=c.gameboard.locations;for(let n=0;n<t.length;n++){const i=d("div","row");for(let e=0;e<t.length;e++){const o=d("div","square");i.appendChild(o);let a=!1;o.addEventListener("click",(()=>{if(a)return;c.gameboard.receiveAttack(n,e),c.gameboard.checkSinked()&&g("You won the game!"),l.checkSinked()&&g("Computer won! Try again!"),1===t[n][e]?o.classList.add("hit"):o.classList.add("miss"),a=!0,v(c.gameboard.remainingShips(),l.remainingShips());const i=c.doMove();l.receiveAttack(i.row,i.column),m()}))}e.appendChild(i)}a.appendChild(e)}(),a.appendChild(t)}()})),r.appendChild(s),e.append(t,n,i,o),a.append(e,r)}function v(e,t){const n=document.getElementById("ships-alive");n.firstChild.innerText=`Computer has ${e} ships alive`,n.children[1].innerText=`You have ${t} ships alive`}function m(){const e=d("div","player-board"),t=l.locations;for(let n=0;n<t.length;n++){const i=d("div","row");for(let e=0;e<t.length;e++){const o=d("div","square");1===t[n][e]&&o.classList.add("ship"),"x"===t[n][e]&&o.classList.add("miss"),i.appendChild(o)}e.appendChild(i)}a.insertBefore(e,a.children[0]),a.removeChild(a.children[1])}function g(n){const i=d("div","outcome-restart"),o=d("p");o.innerText=n,i.appendChild(o);const s=d("button","play-again");s.innerText="Play Again",s.addEventListener("click",(()=>{h(),r.classList.remove("active"),l=e(),c=t(),f(),p()})),i.appendChild(s),r.classList.add("active"),a.append(i)}!function(){const e=d("div","new-game-container"),t=d("h2");t.innerText="New Game",t.addEventListener("click",(()=>{h(),f(),p()}));const n=d("div","credits"),i=d("p");i.innerText="Created by vladius9512";const o=d("a");o.href="https://github.com/vladius9512",o.target="_blank";const r=d("img");r.src="./images/github.svg",r.alt="github-logo",o.append(r),n.append(i,o),e.append(t,n),a.append(e)}()})()})();