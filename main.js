(()=>{var e={194:e=>{function t({length:e,hits:t,sunk:n,row:o,col:i}){return{length:e,hits:t||0,sunk:n||!1,id:Date.now(),position:{row:o,column:i},hit(){this.hits++,this.isSunk()},isSunk(){this.length===this.hits&&(this.sunk=!0)}}}function n(){let e=[];for(let t=0;t<10;t++){e[t]=[];for(let n=0;n<10;n++)e[t][n]=0}return e}function o(){return{locations:n(),ships:[],placeShip(e,n,o,i){let a;if(!0===i){a={row:[],column:[o]};for(let t=n;t<n+e;t++)this.locations[t][o]=1,a.row.push(t)}else{a={row:[n],column:[]};for(let t=o;t<o+e;t++)this.locations[n][t]=1,a.column.push(t)}const r=t({length:e,row:a.row,col:a.column});this.ships.push(r)},receiveAttack(e,t){!1===this.ships.some((n=>!(!n.position.row.includes(e)||!n.position.column.includes(t)||(n.hit(),0))))&&(this.locations[e][t]="x")},checkSinked(){return this.ships.every((e=>!0===e.sunk))},remainingShips(){return this.ships.filter((({sunk:e})=>!1===e)).length}}}e.exports={createShip:t,Gameboard:o,AI:function(){const e=o(),t=n();return e.placeShip(4,2,3),e.placeShip(2,0,0),e.placeShip(5,9,0),e.placeShip(3,5,5,!0),{gameboard:e,markedLocations:t,doMove(){let e={row:Math.floor(9*Math.random()),column:Math.floor(9*Math.random())};if(0===this.markedLocations[e.row][e.column])return this.markedLocations[e.row][e.column]="x",e;this.doMove()}}}}}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(()=>{"use strict";const{Gameboard:e,AI:t}=n(194),o=document.getElementsByTagName("main")[0];let i,a=e(),r=t();function s(e,t){const n=document.createElement(e);return n.classList.add(t),n}function d(){o.innerHTML=""}function l(){const e=s("div","player-board"),t=a.locations;for(let n=0;n<t.length;n++){const o=s("div","row");for(let r=0;r<t.length;r++){const d=s("div","square");1===t[n][r]&&d.classList.add("ship"),d.addEventListener("dragover",(e=>{e.preventDefault()}),!1),d.addEventListener("drop",(o=>{o.preventDefault();let s=i.children.length;if(1===t[n][r])return;if(0!=n&&0!=r&&1===t[n-1][r-1])return;if(9!=n&&9!=r&&1===t[n+1][r+1])return;if(0!=n)for(let e=n;e<n+s;e++)if(1===t[e-1][r])return console.log(e+1,r),void console.log("a");if(9!=n)for(let e=n;e<n+s;e++)if(1===t[e+1][r])return console.log(e+1,r),void console.log("b");if(0!=r)for(let e=r;e<r+s;e++)if(1===t[n][e+1])return console.log(n,e+1),void console.log("c");if(9!=r)for(let e=r;e<r+s;e++)if(1===t[n][e-1])return console.log(n,e-1),void console.log("d");if("on"===i.dataset.placed)return;const d=i.dataset.horizontal;r+s>10&&"on"===d||n+s>10&&"off"===d||("on"===d?(i.dataset.placed="on",a.placeShip(s,n,r,!1)):(i.dataset.placed="on",a.placeShip(s,n,r,!0)),e.innerHTML="",l())})),o.appendChild(d)}e.appendChild(o)}o.appendChild(e)}function c(e,t){const n=s("div",t);n.dataset.horizontal="on",n.dataset.placed="off",n.draggable="true",n.addEventListener("drag",(()=>{i=n}));for(let t=0;t<e;t++){const e=s("div","boat-part");n.appendChild(e)}return n.addEventListener("click",(()=>{"on"!==n.dataset.placed&&("on"===n.dataset.horizontal?n.dataset.horizontal="off":n.dataset.horizontal="on")})),n}function h(){const e=s("div","player-board"),t=a.locations;for(let n=0;n<t.length;n++){const o=s("div","row");for(let e=0;e<t.length;e++){const i=s("div","square");1===t[n][e]&&i.classList.add("ship"),"x"===t[n][e]&&i.classList.add("miss"),o.appendChild(i)}e.appendChild(o)}o.insertBefore(e,o.children[0]),o.removeChild(o.children[1])}!function(){const e=s("div","new-game-container"),t=s("h2");t.innerText="New Game",t.addEventListener("click",(()=>{d(),function(){const e=s("div","boats-container"),t=c(5,"ship-container"),n=c(4,"ship-container"),i=c(3,"ship-container"),p=c(2,"ship-container"),u=s("div","start-game-container"),f=s("button","start-game");f.innerText="Start Game",f.id="start-game",f.addEventListener("click",(()=>{4==a.ships.length&&function(){const e=s("p"),t=s("div");t.id="ships-alive";const n=s("p");n.innerText=r.gameboard.remainingShips(),t.appendChild(n),e.innerText="vs",d(),l(),o.appendChild(e),function(){const e=s("div","computer-board"),t=r.gameboard.locations;for(let n=0;n<t.length;n++){const o=s("div","row");for(let e=0;e<t.length;e++){const i=s("div","square");o.appendChild(i);let d=!1;i.addEventListener("click",(()=>{if(d)return;var o;r.gameboard.receiveAttack(n,e),r.gameboard.checkSinked()&&alert("game won"),a.checkSinked()&&alert("you lost"),1===t[n][e]?i.classList.add("hit"):i.classList.add("miss"),d=!0,o=r.gameboard.remainingShips(),document.getElementById("ships-alive").firstChild.innerText=o;const s=r.doMove();a.receiveAttack(s.row,s.column),h()}))}e.appendChild(o)}o.appendChild(e)}(),o.appendChild(t)}()})),u.appendChild(f),e.append(t,n,i,p),o.append(e,u)}(),l()}));const n=s("div","credits"),i=s("p");i.innerText="Created by vladius9512";const p=s("a");p.href="https://github.com/vladius9512",p.target="_blank";const u=s("img");u.src="./images/github.svg",u.alt="github-logo",p.append(u),n.append(i,p),e.append(t,n),o.append(e)}()})()})();