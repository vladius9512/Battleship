(()=>{var e={194:e=>{function t({length:e,hits:t,sunk:n,row:i,col:a}){return{length:e,hits:t||0,sunk:n||!1,id:Date.now(),position:{row:i,column:a},hit(){this.hits++,this.isSunk()},isSunk(){this.length===this.hits&&(this.sunk=!0)}}}function n(){let e=[];for(let t=0;t<10;t++){e[t]=[];for(let n=0;n<10;n++)e[t][n]=0}return e}function i(){return{locations:n(),ships:[],placeShip(e,n,i,a){let o;if(!0===a){o={row:[],column:[i]};for(let t=n;t<n+e;t++)this.locations[t][i]=1,o.row.push(t)}else{o={row:[n],column:[]};for(let t=i;t<i+e;t++)this.locations[n][t]=1,o.column.push(t)}const r=t({length:e,row:o.row,col:o.column});this.ships.push(r)},receiveAttack(e,t){!1===this.ships.some((n=>!(!n.position.row.includes(e)||!n.position.column.includes(t)||(n.hit(),0))))&&(this.locations[e][t]="x")},checkSinked(){return this.ships.every((e=>!0===e.sunk))},remainingShips(){return this.ships.filter((({sunk:e})=>!1===e)).length}}}e.exports={Gameboard:i,AI:function(){const e=i(),t=n();return e.placeShip(4,2,3),e.placeShip(2,0,0),e.placeShip(5,9,0),e.placeShip(3,5,5,!0),{gameboard:e,markedLocations:t,doMove(){let e={row:Math.floor(9*Math.random()),column:Math.floor(9*Math.random())};return 0===this.markedLocations[e.row][e.column]?(this.markedLocations[e.row][e.column]="x",e):this.doMove()}}},createShip:t}},555:e=>{e.exports={checkSquaresHorizontal:function(e,t,n,i){if(t>0&&t<e.length-1)for(let a=i;a<i+n;a++)if(1===e[t-1][a]||1===e[t+1][a])return!1;if(0===t&&t!==e.length-1)for(let a=i;a<i+n;a++)if(1===e[t+1][a])return!1;if(t===e.length-1)for(let a=i;a<i+n;a++)if(1===e[t-1][a])return!1;return!0},checkSquaresVertical:function(e,t,n,i){if(t>0&&t<e.length-1)for(let a=i;a<i+n;a++)if(1===e[a][t-1]||1===e[a][t+1])return!1;if(0===t)for(let a=i;a<i+n;a++)if(1===e[a][t+1])return!1;if(t===e.length-1)for(let a=i;a<i+n;a++)if(1===e[a][t-1])return!1;return!0}}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}(()=>{"use strict";const{Gameboard:e,AI:t}=n(194),{checkSquaresHorizontal:i,checkSquaresVertical:a}=n(555),o=document.getElementsByTagName("main")[0],r=document.getElementsByClassName("overlay")[0];let s,d=e(),l=t();function c(e,t){const n=document.createElement(e);return void 0!==t&&n.classList.add(t),n}function h(){o.innerHTML=""}function p(){const e=c("div","player-board"),t=d.locations;for(let n=0;n<t.length;n++){const r=c("div","row");for(let l=0;l<t.length;l++){const h=c("div","square");1===t[n][l]&&h.classList.add("ship"),h.addEventListener("dragover",(e=>{e.preventDefault()}),!1),h.addEventListener("drop",(r=>{r.preventDefault();let c=s.children.length;if(1===t[n][l])return;if(0!=n&&0!=l&&1===t[n-1][l-1])return;if(9!=n&&9!=l&&1===t[n+1][l+1])return;if("on"===s.dataset.horizontal){if(!1===i(t,n,c,l))return}else if(!1===a(t,l,c,n))return;if("on"===s.dataset.placed)return;const h=s.dataset.horizontal;l+c>10&&"on"===h||n+c>10&&"off"===h||("on"===h?(s.dataset.placed="on",d.placeShip(c,n,l,!1)):(s.dataset.placed="on",d.placeShip(c,n,l,!0)),e.innerHTML="",p(),o.removeChild(o.children[2]))})),r.appendChild(h)}e.appendChild(r)}o.appendChild(e)}function u(e,t){const n=c("div",t);n.dataset.horizontal="on",n.dataset.placed="off",n.draggable="true",n.addEventListener("drag",(()=>{s=n}));for(let t=0;t<e;t++){const e=c("div","boat-part");n.appendChild(e)}return n.addEventListener("click",(()=>{"on"!==n.dataset.placed&&("on"===n.dataset.horizontal?n.dataset.horizontal="off":n.dataset.horizontal="on")})),n}function f(){const e=c("div","boats-container"),t=u(5,"ship-container"),n=u(4,"ship-container"),i=u(3,"ship-container"),a=u(2,"ship-container"),r=c("div","start-game-container"),s=c("button","start-game");s.innerText="Start Game",s.id="start-game",s.addEventListener("click",(()=>{4==d.ships.length&&function(){const e=c("p"),t=c("div");t.id="ships-alive";const n=c("p"),i=c("p");i.innerText="You have 4 ships alive",n.innerText="Computer has 4 ships alive",t.append(n,i),e.innerText="vs",h(),p(),o.appendChild(e),function(){const e=c("div","computer-board"),t=l.gameboard.locations;for(let n=0;n<t.length;n++){const i=c("div","row");for(let e=0;e<t.length;e++){const a=c("div","square");i.appendChild(a);let o=!1;a.addEventListener("click",(()=>{if(o)return;l.gameboard.receiveAttack(n,e),l.gameboard.checkSinked()&&g("You won the game!"),d.checkSinked()&&g("Computer won! Try again!"),1===t[n][e]?(a.classList.add("hit"),a.classList.add("disabled")):(a.classList.add("miss"),a.classList.add("disabled")),o=!0,v(l.gameboard.remainingShips(),d.remainingShips());const i=l.doMove();d.receiveAttack(i.row,i.column),m()}))}e.appendChild(i)}o.appendChild(e)}(),o.appendChild(t)}()})),r.appendChild(s),e.append(t,n,i,a),o.append(e,r)}function v(e,t){const n=document.getElementById("ships-alive");n.firstChild.innerText=`Computer has ${e} ships alive`,n.children[1].innerText=`You have ${t} ships alive`}function m(){const e=c("div","player-board"),t=d.locations;for(let n=0;n<t.length;n++){const i=c("div","row");for(let e=0;e<t.length;e++){const a=c("div","square");1===t[n][e]&&a.classList.add("ship"),"x"===t[n][e]&&a.classList.add("miss"),i.appendChild(a)}e.appendChild(i)}o.insertBefore(e,o.children[0]),o.removeChild(o.children[1])}function g(n){const i=c("div","outcome-restart"),a=c("p");a.innerText=n,i.appendChild(a);const o=c("button","play-again");o.innerText="Play Again",o.addEventListener("click",(()=>{h(),r.classList.remove("active"),d=e(),l=t(),f(),p()})),i.appendChild(o),r.classList.add("active"),r.append(i)}!function(){const e=c("div","new-game-container"),t=c("h2");t.innerText="New Game",t.addEventListener("click",(()=>{h(),f(),p()}));const n=c("div","credits"),i=c("p");i.innerText="Created by vladius9512";const a=c("a");a.href="https://github.com/vladius9512",a.target="_blank";const r=c("img");r.src="./images/github.svg",r.alt="github-logo",a.append(r),n.append(i,a),e.append(t,n),o.append(e)}()})()})();